"use strict";var MovieItem={props:["movie"],methods:{getMovieInfo:function(t){this.$emit("getMovie",t)},addToFavourites:function(t){this.$emit("addToFavourites",t)}},template:"#movieItem"},Pagination={props:{page:{type:Number,default:1,required:!0},total:{type:Number,default:0,required:!0}},methods:{goToPage:function(t){this.$emit("goToPage",t),console.log(t)}},computed:{from:function(){var t=this.page-2;return t<1?1:t},to:function(){var t=this.page+2;return t>this.total?this.total:t}},template:"#pagination"},App={data:function(){return{API_KEY:"e6735353",search:"titanic",selected:["Movie","Series","Episode"],select:"Movie",year:"",movieList:[],movieInfo:{},favourite:[],showModal:!1,rating:"",theme:"dark",totalPages:0,page:1}},components:{MovieItem:MovieItem,Pagination:Pagination},created:function(){this.favourite=JSON.parse(localStorage.getItem("user_favourites")),this.theme=document.cookie},methods:{searchMovie:function(){var e=this;""!==this.search?axios.get("https://www.omdbapi.com/?apikey=".concat(this.API_KEY,"&s=").concat(this.search,"&type=").concat(this.select,"&page=").concat(this.page,"&y=").concat(this.year)).then(function(t){0!==e.year.length&&4!==e.year.length?e.showInfo("Year must contain four digits."):4===e.year.length&&e.year<1900||e.year>(new Date).getFullYear()?e.showInfo("Enter year from 1900 to ".concat((new Date).getFullYear(),".")):"False"===t.data.Response?e.showInfo("Movie not found!"):(e.movieList=t.data.Search,e.totalPages=Math.ceil(t.data.totalResults/10))}).catch(function(t){e.showInfo("".concat(t.code,". Try again later."))}):this.showInfo("Enter movie title.")},goToPage:function(t){this.page=t,this.searchMovie()},getMovieInfo:function(t){var e=this;axios.get("https://www.omdbapi.com/?apikey=".concat(this.API_KEY,"&i=").concat(t)).then(function(t){e.movieInfo=t.data,e.rating=10*e.movieInfo.imdbRating+"%",e.showMovieInfo()}).catch(function(t){e.showInfo(t.code)})},showMovieInfo:function(){this.showModal=!0},addToFavourites:function(e){var t,o=this.movieList.findIndex(function(t){return t.imdbID===e}),i=this.favourite.findIndex(function(t){return t.imdbID===e});-1===i?((t=this.movieList[o]).inFav=!0,this.favourite.push(t),this.showInfo("Added to favourite films.")):1<this.favourite.length?(this.favourite.splice(i,1),this.showInfo("Removed from favourite films.")):(this.favourite.splice(i,1),this.showInfo("Removed from favourite films. List with favourite films is empty.")),localStorage.setItem("user_favourites",JSON.stringify(this.favourite))},movieListWithFavourite:function(){var o=this,i=[];return this.movieList.forEach(function(e){var t=o.favourite.find(function(t){return e.imdbID===t.imdbID});e.inFav=void 0!==t,i.push(e)}),i},changeTheme:function(){"dark"===this.theme?(this.theme="light",document.cookie="light"):(this.theme="dark",document.cookie="dark")},showInfo:function(t){var e="";e+='\n                    <div class="modal_overlay">\n                        <div class="my_modal text-bg-warning text-center fs-2">\n                            '.concat(t,"\n                        </div>\n                    </div>\n                "),document.body.insertAdjacentHTML("afterbegin",e),setTimeout(function(){document.querySelector(".modal_overlay").classList.add("none")},2e3)}}};Vue.createApp(App).mount("#app");